# PlantUML Generator with ChatGPT

---

## Описание

Это приложение — удобный инструмент для генерации UML-схем с помощью ChatGPT и визуализации их через PlantUML. Оно сочетает в себе мощь искусственного интеллекта для генерации кода диаграмм и инструмент PlantUML для создания графических диаграмм на основе текстовых описаний.

Приложение хранит сгенерированные схемы и их коды в локальной базе данных SQLite, обеспечивает просмотр превью диаграмм, управление методологиями и настройками генерации.

---

## Основные возможности

- **Генерация PlantUML кода через ChatGPT**  
  Вводите текстовый промт — описание нужной схемы, и AI создаст корректный PlantUML код.

- **Автоматическая генерация PNG-диаграмм**  
  На основе кода PlantUML приложение генерирует визуальные схемы с помощью локального `plantuml.jar`.

- **Хранение схем в SQLite**  
  Все схемы и их коды сохраняются в базе данных, включая бинарные данные изображений для быстрого просмотра.

- **Просмотр и управление схемами**  
  Просматривайте список сохранённых схем, выводите код, загружайте код обратно в промт, экспортируйте файлы, удаляйте схемы.

- **Методологии генерации**  
  Добавляйте, просматривайте и удаляйте текстовые методологии, которые влияют на генерацию схем.

- **Настройки приложения**  
  - Укажите путь к `plantuml.jar` или скачайте его автоматически  
  - Настройте папку вывода изображений  
  - Включите/выключите улучшение промта и задайте свои шаблоны улучшения
  - Управляйте методологиями

---

## Технологии

- Python 3.8+
- [CustomTkinter](https://github.com/TomSchimansky/CustomTkinter) — современный GUI
- SQLite — локальное хранилище схем
- PlantUML — генерация UML диаграмм из текста
- ChatGPT (через `g4f` библиотеку) — генерация кода диаграмм
- Pillow — работа с изображениями

---

## Установка и запуск

1. **Клонируйте репозиторий:**

```sh
git clone https://github.com/yourusername/plantuml-chatgpt-generator.git
cd plantuml-chatgpt-generator
```

2. **Установите зависимости:**

```sh
pip install -r requirements.txt
```

В `requirements.txt` должны быть указаны:
customtkinter
pillow
g4f

3. **Запустите приложение:**

```sh
python main.py
```

4. **Настройте путь к `plantuml.jar` через меню "Настройки"**  
Если у вас нет `plantuml.jar`, используйте кнопку скачивания в настройках.

---

## Как пользоваться

### Генерация схемы

1. Введите имя файла схемы (без расширения).
2. Выберите методологию или оставьте "Не выбирать".
3. Введите описание схемы в поле промта.
4. При необходимости включите "Улучшить промт" и настройте шаблоны улучшения в настройках.
5. Нажмите "Сгенерировать схему".
6. После генерации схема сохранится в базе и отобразится превью.

### Управление схемами

- Выберите схему из списка слева.
- Используйте кнопки для просмотра кода, загрузки кода в промт, экспорта файлов или удаления схемы.

### Методологии

- В настройках добавляйте новые методологии — текстовые шаблоны, влияющие на генерацию.
- Удаляйте выбранные методологии через отдельное окно удаления.

### Настройки

- Укажите путь к `plantuml.jar` или скачайте его.
- Настройте папку вывода изображений.
- Включайте улучшение промта и задавайте шаблоны.
- Управляйте методологиями и очищайте папку с изображениями.
- Сбрасывайте настройки к значениям по умолчанию.

---

## Особенности реализации

- Схемы сохраняются в SQLite с бинарными данными изображений — быстрое превью без обращения к файлам.
- Генерация схемы повторяется до заданного максимума попыток, если PlantUML сообщает об ошибках.
- Приложение работает автономно, требуется только Java для запуска `plantuml.jar`.

---

## Примеры PlantUML

Приложение генерирует код на основе [PlantUML](https://plantuml.com), который поддерживает:

- Диаграммы последовательностей
- Диаграммы классов
- Диаграммы прецедентов
- Диаграммы состояний
- Активности и многое другое

@startuml
Alice -> Bob: Authentication Request
Bob --> Alice: Authentication Response
@enduml


---

## Лицензия

MIT License

---

## Контакты и поддержка

Если у вас возникли вопросы или предложения, создайте issue в репозитории или свяжитесь со мной по email: 

---

*Спасибо за использование приложения!*
